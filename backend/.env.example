# =============================================================================
# Orion Browser - Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values.
# NEVER commit .env to version control!
#
# For production deployments, use your hosting provider's secrets management.
# =============================================================================

# -----------------------------------------------------------------------------
# Convex Configuration
# -----------------------------------------------------------------------------
# Your Convex deployment URL (found in Convex dashboard)
# Format: https://<deployment-name>.convex.cloud
CONVEX_DEPLOYMENT=https://your-deployment.convex.cloud

# Convex deploy key (for CI/CD deployments)
# Generate in: Convex Dashboard > Settings > Deploy Keys
CONVEX_DEPLOY_KEY=prod:your-deploy-key-here

# -----------------------------------------------------------------------------
# Clerk Authentication
# -----------------------------------------------------------------------------
# Clerk Secret Key (Backend - keep this secret!)
# Found in: Clerk Dashboard > API Keys
CLERK_SECRET_KEY=sk_test_your-clerk-secret-key

# Clerk Publishable Key (Frontend - safe to expose)
# Found in: Clerk Dashboard > API Keys
CLERK_PUBLISHABLE_KEY=pk_test_your-clerk-publishable-key

# Clerk Webhook Secret (for webhook signature verification)
# Found in: Clerk Dashboard > Webhooks > Your Webhook > Signing Secret
CLERK_WEBHOOK_SECRET=whsec_your-webhook-secret

# Clerk JWT Issuer (your Clerk frontend API URL)
# Format: https://<your-frontend-api>.clerk.accounts.dev
CLERK_JWT_ISSUER=https://your-frontend-api.clerk.accounts.dev

# -----------------------------------------------------------------------------
# OpenAI Configuration
# -----------------------------------------------------------------------------
# OpenAI API Key (for embeddings and AI features)
# Found in: OpenAI Platform > API Keys
OPENAI_API_KEY=sk-your-openai-api-key

# OpenAI Organization ID (optional)
OPENAI_ORG_ID=org-your-org-id

# Model configuration
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4-turbo-preview

# -----------------------------------------------------------------------------
# Security & Encryption
# -----------------------------------------------------------------------------
# Master encryption key for end-to-end encryption
# Generate with: openssl rand -base64 32
# IMPORTANT: Back this up securely! Loss means data cannot be recovered.
ENCRYPTION_KEY=your-32-byte-base64-encoded-encryption-key

# Key rotation version (increment when rotating keys)
ENCRYPTION_KEY_VERSION=1

# Previous encryption key (for key rotation, optional)
ENCRYPTION_KEY_PREVIOUS=

# HMAC key for URL hashing and PII protection
# Generate with: openssl rand -base64 32
HMAC_SECRET_KEY=your-32-byte-base64-encoded-hmac-key

# JWT secret for additional token signing (if needed)
JWT_SECRET=your-jwt-secret-key

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Redis URL for rate limiting (optional, uses in-memory if not set)
REDIS_URL=redis://localhost:6379

# Rate limit configuration
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable/disable features
FEATURE_VOICE_ENABLED=true
FEATURE_EXPLICIT_CONTENT_ENABLED=true
FEATURE_AI_PROACTIVE_ENABLED=true
FEATURE_CROSS_DEVICE_SYNC=true

# AI intelligence levels available
AI_LEVELS_ENABLED=passive,advisory,proactive

# -----------------------------------------------------------------------------
# Monitoring & Logging
# -----------------------------------------------------------------------------
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Sentry DSN for error tracking (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project

# Analytics endpoint (optional)
ANALYTICS_ENDPOINT=

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
# Environment name: development, staging, production
NODE_ENV=development

# Debug mode (enables additional logging and checks)
DEBUG=false

# API URL for the backend
API_URL=http://localhost:3000

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Data Retention & Compliance
# -----------------------------------------------------------------------------
# Default data retention period in days
DEFAULT_RETENTION_DAYS=90

# Maximum retention period in days
MAX_RETENTION_DAYS=365

# Grace period for deletion requests (in days)
DELETION_GRACE_PERIOD_DAYS=30

# Automatic cleanup enabled
AUTO_CLEANUP_ENABLED=true

# -----------------------------------------------------------------------------
# Vector Database Configuration
# -----------------------------------------------------------------------------
# Embedding dimension (must match OpenAI model)
VECTOR_DIMENSION=1536

# Maximum vectors per user per namespace
MAX_VECTORS_PER_NAMESPACE=100000

# Similarity threshold for search
DEFAULT_SIMILARITY_THRESHOLD=0.5

# -----------------------------------------------------------------------------
# iOS App Configuration (for reference)
# -----------------------------------------------------------------------------
# Bundle identifier
IOS_BUNDLE_ID=com.yourcompany.orion

# App Group identifier (for extensions)
IOS_APP_GROUP=group.com.yourcompany.orion

# Keychain access group
IOS_KEYCHAIN_GROUP=com.yourcompany.orion

# =============================================================================
# SECURITY NOTES
# =============================================================================
#
# 1. NEVER commit this file with real values to version control
# 2. Use different keys for development, staging, and production
# 3. Rotate keys periodically (especially ENCRYPTION_KEY)
# 4. Store production secrets in a secure secrets manager
# 5. Limit access to production environment variables
# 6. Monitor for unauthorized access to these values
#
# For Convex deployments, set environment variables using:
#   npx convex env set VARIABLE_NAME value
#
# For production, use:
#   npx convex env set VARIABLE_NAME value --prod
#
# =============================================================================
